<html><head>
<base target="_top"/>
<title>United States Patent: 9384026</title></head>
<!---BUF1=9384026
BUF7=2016
BUF8=110051
BUF9=/1/
BUF51=9
---->
<body bgcolor="#FFFFFF">
<a name="top"></a>
<center>
<img alt="[US Patent &amp; Trademark Office, Patent Full Text and Image Database]" src="/netaicon/PTO/patfthdr.gif"/>
<br/>
<table>
<tbody><tr><td align="center">
<a href="/netahtml/PTO/index.html"><img alt="[Home]" border="0" src="/netaicon/PTO/home.gif" valign="middle"/></a>
<a href="/netahtml/PTO/search-bool.html"><img alt="[Boolean Search]" border="0" src="/netaicon/PTO/boolean.gif" valign="middle"/></a>
<a href="/netahtml/PTO/search-adv.htm"><img alt="[Manual Search]" border="0" src="/netaicon/PTO/manual.gif" valign="middle"/></a>
<a href="/netahtml/PTO/srchnum.htm"><img alt="[Number Search]" border="0" src="/netaicon/PTO/number.gif" valign="middle"/></a>
<a href="/netahtml/PTO/help/help.htm"><img alt="[Help]" border="0" src="/netaicon/PTO/help.gif" valign="middle"/></a>
</td></tr>
<tr><td align="center">
   <a href="/netacgi/nph-Parser?Sect1=PTO2&amp;Sect2=HITOFF&amp;u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&amp;r=156&amp;f=S&amp;l=50&amp;d=PTXT&amp;s1=facebook&amp;p=3&amp;Query=facebook"><img alt="[PREV_LIST]" border="0" src="/netaicon/PTO/prevlist.gif" valign="MIDDLE"/></a>
<a href="/netacgi/nph-Parser?Sect1=PTO2&amp;Sect2=HITOFF&amp;u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&amp;r=156&amp;f=S&amp;l=50&amp;d=PTXT&amp;s1=facebook&amp;p=4&amp;Query=facebook"><img alt="[HIT_LIST]" border="0" src="/netaicon/PTO/hitlist.gif" valign="MIDDLE"/></a>
<a href="/netacgi/nph-Parser?Sect1=PTO2&amp;Sect2=HITOFF&amp;u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&amp;r=156&amp;f=S&amp;l=50&amp;d=PTXT&amp;s1=facebook&amp;p=5&amp;Query=facebook"><img alt="[NEXT_LIST]" border="0" src="/netaicon/PTO/nextlist.gif" valign="MIDDLE"/></a>
<a href="/netacgi/nph-Parser?Sect1=PTO2&amp;Sect2=HITOFF&amp;u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&amp;r=155&amp;f=G&amp;l=50&amp;d=PTXT&amp;s1=facebook&amp;p=4&amp;OS=facebook"><img alt="[PREV_DOC]" border="0" src="/netaicon/PTO/prevdoc.gif" valign="MIDDLE"/></a>
<a href="/netacgi/nph-Parser?Sect1=PTO2&amp;Sect2=HITOFF&amp;u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&amp;r=157&amp;f=G&amp;l=50&amp;d=PTXT&amp;s1=facebook&amp;p=4&amp;OS=facebook"><img alt="[NEXT_DOC]" border="0" src="/netaicon/PTO/nextdoc.gif" valign="MIDDLE"/></a>

<a href="#bottom"><img alt="[Bottom]" border="0" src="/netaicon/PTO/bottom.gif" valign="middle"/></a>
</td></tr>
   <tr><td align="center">
   <a href="http://ebiz1.uspto.gov/vision-service/ShoppingCart_P/ShowShoppingCart?backUrl1=http%3A//patft.uspto.gov/netacgi/nph-Parser?Sect1%3DPTO2%26Sect2%3DHITOFF%26u%3D%25252Fnetahtml%25252FPTO%25252Fsearch-adv.htm%26r%3D156%26f%3DG%26l%3D50%26d%3DPTXT%26s1%3Dfacebook%26p%3D4%26OS%3Dfacebook&amp;backLabel1=Back%20to%20Document%3A%209384026"><img alt="[
View Shopping Cart]" border="0" src="/netaicon/PTO/cart.gif" valign="middle"/></a>
   <a href="http://ebiz1.uspto.gov/vision-service/ShoppingCart_P/AddToShoppingCart?docNumber=9384026&amp;backUrl1=http%3A//patft.uspto.gov/netacgi/nph-Parser?Sect1%3DPTO2%26Sect2%3DHITOFF%26u%3D%25252Fnetahtml%25252FPTO%25252Fsearch-adv.htm%26r%3D156%26f%3DG%26l%3D50%26d%3DPTXT%26s1%3Dfacebook%26p%3D4%26OS%3Dfacebook&amp;backLabel1=Back%20to%20Document%3A%209384026">
   <img alt="[Add to Shopping Cart]" border="0" src="/netaicon/PTO/order.gif" valign="middle"/></a>
   </td></tr>
   <tr><td align="center">
   <a href="http://pdfpiw.uspto.gov/.piw?Docid=09384026&amp;homeurl=http%3A%2F%2Fpatft.uspto.gov%2Fnetacgi%2Fnph-Parser%3FSect1%3DPTO2%2526Sect2%3DHITOFF%2526u%3D%25252Fnetahtml%25252FPTO%25252Fsearch-adv.htm%2526r%3D156%2526f%3DG%2526l%3D50%2526d%3DPTXT%2526s1%3Dfacebook%2526p%3D4%2526OS%3Dfacebook%2526RS%3Dfacebook&amp;PageNum=&amp;Rtype=&amp;SectionNum=&amp;idkey=NONE&amp;Input=View+first+page"><img alt="[Image]" border="0" src="/netaicon/PTO/image.gif" valign="middle"/></a>

   </td></tr>
</tbody></table>
</center>
<table width="100%">
<tbody><tr><td align="left" width="50%"> </td>
<td align="right" valign="bottom" width="50%"><font size="-1">( <strong>156</strong></font> <font size="-2">of</font> <strong><font size="-1">7895</font></strong> <font size="-1">)</font></td></tr></tbody></table>
<hr/>
   <table width="100%">
   <tbody><tr>	<td align="left" width="50%"><b>United States Patent </b></td>
   <td align="right" width="50%"><b>9,384,026</b></td>
   </tr>
     <tr><td align="left" width="50%"><b>
         Banga
,   et al.</b>
     </td>
     <td align="right" width="50%"> <b>
     July 5, 2016
</b></td>
     </tr>
     </tbody></table>
       <hr/>
       <font size="+1">Sharing and injecting cookies into virtual machines for retrieving
     requested web pages
</font><br/>
       <br/><center><b>Abstract</b></center>
       <p> Approaches for selectively sharing cookies between virtual machines
     responsible for retrieving web content. A request to display a web page
     is received. The web page includes top-level content served by a
     top-level domain and secondary content served by one or more other
     domains. A determination that at least a portion of the web page should
     be retrieved from within a virtual machine is made. A policy is consulted
     to identify a set of cookies to inject into the virtual machine. The
     policy considers whether the virtual machine is responsible for
     retrieving one or more of top-level content and secondary content in
     identifying the set of cookies to inject into the virtual machine. After
     injecting the set of cookies into the virtual machine, the portion of the
     web page is retrieved from within the virtual machine.
</p>
       <hr/>
<table width="100%"> <tbody><tr> <th align="left" scope="row" valign="top" width="10%">Inventors:</th> <td align="left" width="90%">
 <b>Banga; Gaurav</b> (Cupertino, CA)<b>, Pratt; Ian</b> (Cambridge, <b>GB</b>)<b>, Kapoor; Vikram</b> (Cupertino, CA)<b>, Buddhiraja; Prakash</b> (Sunnyvale, CA)<b>, Bondalapati; Kiran</b> (Los Altos, CA) </td> </tr>
<tr><th align="left" scope="row" valign="top" width="10%">Applicant: </th><td align="left" width="90%"> <table> <tbody><tr> <th align="center" scope="column">Name</th> <th align="center" scope="column">City</th> <th align="center" scope="column">State</th> <th align="center" scope="column">Country</th> <th align="center" scope="column">Type</th> </tr> <tr> <td> <b><br/>Bromium, Inc.</b> </td><td> <br/>Cupertino </td><td align="center"> <br/>CA </td><td align="center"> <br/>US </td> <td align="left"> </td>
</tr> </tbody></table>
<!-- AANM>
~AANM Bromium, Inc.
~AACI Cupertino
~AAST CA
~AACO US
</AANM -->
</td></tr>
<tr> <th align="left" scope="row" valign="top" width="10%">Assignee:</th>
<td align="left" width="90%">

<b>Bromium, Inc.</b>
 (Cupertino, 
CA)
<br/>

</td>
</tr>
       <tr><th align="left" nowrap="" scope="row" valign="top" width="10%">Family ID:
       </th><td align="left" width="90%">
       <b>56234903
</b></td></tr>
       <tr><th align="left" nowrap="" scope="row" valign="top" width="10%">Appl. No.:
       </th><td align="left" width="90%">
       <b>14/168,672</b></td></tr>
       <tr><th align="left" scope="row" valign="top" width="10%">Filed:
       </th><td align="left" width="90%">
       <b>January 30, 2014</b></td></tr>
     </tbody></table>
<hr/> <center><b>Related U.S. Patent Documents</b></center> <hr/> <table width="100%"> <tbody><tr><th scope="col" width="7%"></th><th scope="col"></th><th scope="col"></th> <th scope="col"></th><th scope="col"></th><td></td></tr> <tr><td align="left">
</td><th align="center" scope="col"><b><u>Application Number</u></b></th><th align="center" scope="col"><b><u>Filing Date</u></b></th><th align="center" scope="col"><b><u>Patent Number</u></b></th><th align="center" scope="col"><b><u>Issue Date</u></b></th></tr><tr><td align="center"> </td><td align="center">13526390</td><td align="center">Jun 18, 2012</td><td align="center"></td><td align="center"></td></tr><tr><td align="center"> 
</td>
</tr> </tbody></table><td< td=""></td<><td< td=""></td<>     <hr/>
<p> <table width="100%"> <tbody><tr><td align="left" valign="top" width="30%"><b>Current U.S. Class:</b></td> <td align="right" valign="top" width="70%"><b>1/1</b> </td></tr> 
       <tr><td align="left" valign="top" width="30%"><b>Current CPC Class: </b></td>
       <td align="right" valign="top" width="70%">G06F 9/45533 (20130101); G06F 2009/45587 (20130101); H04L 67/10 (20130101); H04L 63/10 (20130101)</td></tr>
         <tr><td align="left" valign="top" width="30%"><b>Current International Class: </b></td>
         <td align="right" valign="top" width="70%">G06F 9/455 (20060101); H04L 29/08 (20060101); H04L 29/06 (20060101)</td></tr>
     </tbody></table>
</p><hr/><center><b>References Cited  <a href="/netacgi/nph-Parser?Sect1=PTO2&amp;Sect2=HITOFF&amp;p=1&amp;u=%2Fnetahtml%2Fsearch-adv.htm&amp;r=0&amp;f=S&amp;l=50&amp;d=PALL&amp;Query=ref/9384026">[Referenced By]</a></b></center>       <hr/>
       <center><b>U.S. Patent Documents</b></center>
<table width="100%"> <tbody><tr><th scope="col" width="33%"></th> <th scope="col" width="33%"></th> <th scope="col" width="34%"></th></tr> <tr> <td align="left">
<a href="/netacgi/nph-Parser?Sect2=PTO1&amp;Sect2=HITOFF&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&amp;r=1&amp;f=G&amp;l=50&amp;d=PALL&amp;RefSrch=yes&amp;Query=PN%2F6948044">6948044</a></td><td align="left">
September 2005</td><td align="left">
Chandrasekaran</td></tr><tr><td align="left">
<a href="/netacgi/nph-Parser?Sect2=PTO1&amp;Sect2=HITOFF&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&amp;r=1&amp;f=G&amp;l=50&amp;d=PALL&amp;RefSrch=yes&amp;Query=PN%2F6959420">6959420</a></td><td align="left">
October 2005</td><td align="left">
Mitchell et al.</td></tr><tr><td align="left">
<a href="/netacgi/nph-Parser?Sect2=PTO1&amp;Sect2=HITOFF&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&amp;r=1&amp;f=G&amp;l=50&amp;d=PALL&amp;RefSrch=yes&amp;Query=PN%2F7171523">7171523</a></td><td align="left">
January 2007</td><td align="left">
Yamasaki</td></tr><tr><td align="left">
<a href="/netacgi/nph-Parser?Sect2=PTO1&amp;Sect2=HITOFF&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&amp;r=1&amp;f=G&amp;l=50&amp;d=PALL&amp;RefSrch=yes&amp;Query=PN%2F7979807">7979807</a></td><td align="left">
July 2011</td><td align="left">
Subramaniam</td></tr><tr><td align="left">
<a href="/netacgi/nph-Parser?Sect2=PTO1&amp;Sect2=HITOFF&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&amp;r=1&amp;f=G&amp;l=50&amp;d=PALL&amp;RefSrch=yes&amp;Query=PN%2F8146084">8146084</a></td><td align="left">
March 2012</td><td align="left">
Meketa</td></tr><tr><td align="left">
<a href="/netacgi/nph-Parser?Sect2=PTO1&amp;Sect2=HITOFF&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&amp;r=1&amp;f=G&amp;l=50&amp;d=PALL&amp;RefSrch=yes&amp;Query=PN%2F8171390">8171390</a></td><td align="left">
May 2012</td><td align="left">
Channakeshava</td></tr><tr><td align="left">
<a href="/netacgi/nph-Parser?Sect2=PTO1&amp;Sect2=HITOFF&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&amp;r=1&amp;f=G&amp;l=50&amp;d=PALL&amp;RefSrch=yes&amp;Query=PN%2F8190670">8190670</a></td><td align="left">
May 2012</td><td align="left">
Gavrilescu</td></tr><tr><td align="left">
<a href="/netacgi/nph-Parser?Sect2=PTO1&amp;Sect2=HITOFF&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&amp;r=1&amp;f=G&amp;l=50&amp;d=PALL&amp;RefSrch=yes&amp;Query=PN%2F8245241">8245241</a></td><td align="left">
August 2012</td><td align="left">
Hamilton, II</td></tr><tr><td align="left">
<a href="/netacgi/nph-Parser?Sect2=PTO1&amp;Sect2=HITOFF&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&amp;r=1&amp;f=G&amp;l=50&amp;d=PALL&amp;RefSrch=yes&amp;Query=PN%2F8346727">8346727</a></td><td align="left">
January 2013</td><td align="left">
Chester et al.</td></tr><tr><td align="left">
<a href="/netacgi/nph-Parser?Sect2=PTO1&amp;Sect2=HITOFF&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&amp;r=1&amp;f=G&amp;l=50&amp;d=PALL&amp;RefSrch=yes&amp;Query=PN%2F8543641">8543641</a></td><td align="left">
September 2013</td><td align="left">
Cherukuri et al.</td></tr><tr><td align="left">
<a href="/netacgi/nph-Parser?Sect2=PTO1&amp;Sect2=HITOFF&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&amp;r=1&amp;f=G&amp;l=50&amp;d=PALL&amp;RefSrch=yes&amp;Query=PN%2F8561208">8561208</a></td><td align="left">
October 2013</td><td align="left">
Corbett et al.</td></tr><tr><td align="left">
<a href="/netacgi/nph-Parser?Sect2=PTO1&amp;Sect2=HITOFF&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&amp;r=1&amp;f=G&amp;l=50&amp;d=PALL&amp;RefSrch=yes&amp;Query=PN%2F8763136">8763136</a></td><td align="left">
June 2014</td><td align="left">
Li</td></tr><tr><td align="left">
<a href="/netacgi/nph-Parser?Sect2=PTO1&amp;Sect2=HITOFF&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&amp;r=1&amp;f=G&amp;l=50&amp;d=PALL&amp;RefSrch=yes&amp;Query=PN%2F8839245">8839245</a></td><td align="left">
September 2014</td><td align="left">
Khajuria</td></tr><tr><td align="left">
<a href="/netacgi/nph-Parser?Sect2=PTO1&amp;Sect2=HITOFF&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&amp;r=1&amp;f=G&amp;l=50&amp;d=PALL&amp;RefSrch=yes&amp;Query=PN%2F8910277">8910277</a></td><td align="left">
December 2014</td><td align="left">
Reis</td></tr><tr><td align="left">
<a href="/netacgi/nph-Parser?Sect2=PTO1&amp;Sect2=HITOFF&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&amp;r=1&amp;f=G&amp;l=50&amp;d=PALL&amp;RefSrch=yes&amp;Query=PN%2F8970450">8970450</a></td><td align="left">
March 2015</td><td align="left">
Momchilov</td></tr><tr><td align="left">
<a href="/netacgi/nph-Parser?Sect2=PTO1&amp;Sect2=HITOFF&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&amp;r=1&amp;f=G&amp;l=50&amp;d=PALL&amp;RefSrch=yes&amp;Query=PN%2F9065725">9065725</a></td><td align="left">
June 2015</td><td align="left">
Nanda</td></tr><tr><td align="left">
<a href="/netacgi/nph-Parser?Sect2=PTO1&amp;Sect2=HITOFF&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&amp;r=1&amp;f=G&amp;l=50&amp;d=PALL&amp;RefSrch=yes&amp;Query=PN%2F9104837">9104837</a></td><td align="left">
August 2015</td><td align="left">
Khajuria</td></tr><tr><td align="left">
<a href="/netacgi/nph-Parser?Sect2=PTO1&amp;Sect2=HITOFF&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&amp;r=1&amp;f=G&amp;l=50&amp;d=PALL&amp;RefSrch=yes&amp;Query=PN%2F9171348">9171348</a></td><td align="left">
October 2015</td><td align="left">
Qin</td></tr><tr><td align="left">
<a href="/netacgi/nph-Parser?Sect2=PTO1&amp;Sect2=HITOFF&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&amp;r=1&amp;f=G&amp;l=50&amp;d=PALL&amp;RefSrch=yes&amp;Query=PN%2F9201850">9201850</a></td><td align="left">
December 2015</td><td align="left">
Buddhiraja</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20040128670&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2004/0128670</a></td><td align="left">
July 2004</td><td align="left">
Robinson et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20050149726&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2005/0149726</a></td><td align="left">
July 2005</td><td align="left">
Joshi et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20050188361&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2005/0188361</a></td><td align="left">
August 2005</td><td align="left">
Cai et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20050229188&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2005/0229188</a></td><td align="left">
October 2005</td><td align="left">
Schneider</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20060101189&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2006/0101189</a></td><td align="left">
May 2006</td><td align="left">
Chandrasekaran et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20060112342&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2006/0112342</a></td><td align="left">
May 2006</td><td align="left">
Bantz et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20060136910&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2006/0136910</a></td><td align="left">
June 2006</td><td align="left">
Brickell et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20060143617&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2006/0143617</a></td><td align="left">
June 2006</td><td align="left">
Knauerhase et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20060155756&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2006/0155756</a></td><td align="left">
July 2006</td><td align="left">
Stanev</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20060184937&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2006/0184937</a></td><td align="left">
August 2006</td><td align="left">
Abels et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20060288343&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2006/0288343</a></td><td align="left">
December 2006</td><td align="left">
Pallister</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20070180450&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2007/0180450</a></td><td align="left">
August 2007</td><td align="left">
Croft et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20070192329&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2007/0192329</a></td><td align="left">
August 2007</td><td align="left">
Croft et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20080001958&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2008/0001958</a></td><td align="left">
January 2008</td><td align="left">
Vembu et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20080133722&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2008/0133722</a></td><td align="left">
June 2008</td><td align="left">
Ramasundaram et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20090007242&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2009/0007242</a></td><td align="left">
January 2009</td><td align="left">
Subramanian et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20090070869&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2009/0070869</a></td><td align="left">
March 2009</td><td align="left">
Fan et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20090119541&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2009/0119541</a></td><td align="left">
May 2009</td><td align="left">
Inoue et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20090125902&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2009/0125902</a></td><td align="left">
May 2009</td><td align="left">
Ghosh et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20090158140&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2009/0158140</a></td><td align="left">
June 2009</td><td align="left">
Bauchot</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20090165133&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2009/0165133</a></td><td align="left">
June 2009</td><td align="left">
Hwang et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20090172820&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2009/0172820</a></td><td align="left">
July 2009</td><td align="left">
Watson</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20090241037&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2009/0241037</a></td><td align="left">
September 2009</td><td align="left">
Hyndman</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20090249472&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2009/0249472</a></td><td align="left">
October 2009</td><td align="left">
Litvin et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20090276783&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2009/0276783</a></td><td align="left">
November 2009</td><td align="left">
Johnson et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20090284535&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2009/0284535</a></td><td align="left">
November 2009</td><td align="left">
Pelton et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20090313620&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2009/0313620</a></td><td align="left">
December 2009</td><td align="left">
Sedukhin et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20090328033&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2009/0328033</a></td><td align="left">
December 2009</td><td align="left">
Kohavi et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20100122182&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2010/0122182</a></td><td align="left">
May 2010</td><td align="left">
Bromenshenkel</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20100122343&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2010/0122343</a></td><td align="left">
May 2010</td><td align="left">
Ghosh et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20100192224&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2010/0192224</a></td><td align="left">
July 2010</td><td align="left">
Ferri</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20100235831&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2010/0235831</a></td><td align="left">
September 2010</td><td align="left">
Dittmer</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20100306773&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2010/0306773</a></td><td align="left">
December 2010</td><td align="left">
Lee et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20100306849&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2010/0306849</a></td><td align="left">
December 2010</td><td align="left">
Zheng et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20110035494&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2011/0035494</a></td><td align="left">
February 2011</td><td align="left">
Pandey et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20110078333&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2011/0078333</a></td><td align="left">
March 2011</td><td align="left">
Jakubowski</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20110131179&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2011/0131179</a></td><td align="left">
June 2011</td><td align="left">
Ohata et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20110173251&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2011/0173251</a></td><td align="left">
July 2011</td><td align="left">
Sandhu et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20110214163&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2011/0214163</a></td><td align="left">
September 2011</td><td align="left">
Smith</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20110296487&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2011/0296487</a></td><td align="left">
December 2011</td><td align="left">
Walsh</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20110302577&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2011/0302577</a></td><td align="left">
December 2011</td><td align="left">
Reuther et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20120011578&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2012/0011578</a></td><td align="left">
January 2012</td><td align="left">
Hinton</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20120054744&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2012/0054744</a></td><td align="left">
March 2012</td><td align="left">
Singh</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20120089666&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2012/0089666</a></td><td align="left">
April 2012</td><td align="left">
Goswami et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20120096271&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2012/0096271</a></td><td align="left">
April 2012</td><td align="left">
Ramarathinam</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20120096368&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2012/0096368</a></td><td align="left">
April 2012</td><td align="left">
McDowell</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20120151568&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2012/0151568</a></td><td align="left">
June 2012</td><td align="left">
Pieczul</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20120288012&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2012/0288012</a></td><td align="left">
November 2012</td><td align="left">
Staikos et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20120324365&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2012/0324365</a></td><td align="left">
December 2012</td><td align="left">
Momchilov</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20130246563&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2013/0246563</a></td><td align="left">
September 2013</td><td align="left">
Cardozo</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20130254829&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2013/0254829</a></td><td align="left">
September 2013</td><td align="left">
Jakubowski et al.</td></tr><tr><td align="left">
<a href="http://appft.uspto.gov/netacgi/nph-Parser?TERM1=20140215602&amp;Sect1=PTO1&amp;Sect2=HITOFF&amp;d=PG01&amp;p=1&amp;u=%2Fnetahtml%2FPTO%2Fsrchnum.html&amp;r=0&amp;f=S&amp;l=50" target="_blank">2014/0215602</a></td><td align="left">
July 2014</td><td align="left">
Chuaprasort</td></tr><tr><td align="left">

</td>
</tr> </tbody></table>
       <center><b>Foreign Patent Documents</b></center>
<table width="100%"> <tbody><tr><td></td><th scope="col"></th> <td></td><th scope="col"></th> <td></td><th scope="col"></th></tr> <tr> <td align="left">
</td><td align="left">2008073618</td><td></td><td align="left">
Jun 2008</td><td></td><td align="left">
WO</td></tr><tr><td align="left">

</td>
</tr> </tbody></table>
       <i>Primary Examiner:</i> Wu; Benjamin
<br/>
       <i>Attorney, Agent or Firm:</i> <coma><coma>Brokaw Patent Law PC
Brokaw; Christopher J.
<br/>
       <hr/>
       <center><b><i>Parent Case Text</i></b></center>
       <hr/>
       <br/><br/>CLAIM OF PRIORITY AND RELATED APPLICATION DATA
<br/><br/> This application is a continuation-in-part of, and claims priority to,
     U.S. non-provisional patent application Ser. No. 13/526,390, filed Jun.
     18, 2012, entitled "Synchronizing Cookie Data Using a Virtualized
     Browser," the contents of which are hereby incorporated by reference for
     all purposes as if fully set forth herein.
<br/><br/> This application is related to U.S. non-provisional patent application
     Ser. No. 13/523,859, filed Jun. 14, 2012, entitled "Securing an Endpoint
     by Proxying Document Object Models and Windows," the contents of which
     are hereby incorporated by reference for all purposes as if fully set
     forth herein.
         <hr/>
<center><b><i>Claims</i></b></center> <hr/> <br/><br/>What is claimed is: <br/><br/> 1.  One or more non-transitory computer-readable storage mediums storing one or more sequences of instructions for selectively sharing cookies between virtual machines, which
when executed by one or more processors, cause: receiving a request to display a web page, wherein the web page includes top-level content served by a top-level domain and secondary content served by one or more other domains;  consulting a policy to
identify a set of cookies to inject into a virtual machine responsible for retrieving the web page, wherein the policy considers the top-level content and the secondary content in identifying the set of cookies to inject into the virtual machine;  and
after injecting the identified set of cookies into the virtual machine, retrieving the web page from within the virtual machine using the identified set of cookies.
<br/><br/> 2.  The one or more non-transitory computer-readable storage mediums of claim 1, wherein the policy indicates that any permanent cookie associated with either the top-level domain or any of the one or more other domains associated with secondary
content to be retrieved by the virtual machine are to be injected into the virtual machine.
<br/><br/> 3.  The one or more non-transitory computer-readable storage mediums of claim 1, wherein the policy indicates that any session cookies associated with the top-level domain are to be injected into the virtual machine, and wherein the policy
indicates that any session cookies associated with any of the one or more other domains are not to be injected into the virtual machine.
<br/><br/> 4.  The one or more non-transitory computer-readable storage mediums of claim 1, wherein the policy indicates that any permanent cookies associated with the secondary content are to be injected into the virtual machine unless the secondary
content contains an indication that the secondary content should not be embedded within another web page.
<br/><br/> 5.  The one or more non-transitory computer-readable storage mediums of claim 1, wherein the policy indicates that if a first domain redirects requests to itself to a second domain, then cookies associated with the first domain are provided to
the virtual machine when the virtual machine is retrieving content from the second domain.
<br/><br/> 6.  The one or more non-transitory computer-readable storage mediums of claim 1, wherein the policy indicates that if a first domain post data to a second domain, then cookies associated with the first domain are provided to the virtual machine
when the virtual machine is retrieving content from the second domain.
<br/><br/> 7.  The one or more non-transitory computer-readable storage mediums of claim 1, wherein the policy may be configured by a user to ensure cookies associated with a particular domain are injected into virtual machines responsible for retrieving
content from that particular domain in a manner specified by the user.
<br/><br/> 8.  The one or more non-transitory computer-readable storage mediums of claim 1, wherein execution of the one or more sequences of instructions further causes: receiving, from a remote location over a network, updated policy data to replace or
augment the policy.
<br/><br/> 9.  The one or more non-transitory computer-readable storage mediums of claim 1, wherein the web page is a first web page, wherein the virtual machine is a first virtual machine, and wherein execution of the one or more sequences of instructions
further causes: upon receiving a request to display a second web page in a different tab than the first web page, retrieving the second web page from within a different virtual machine than the first virtual machine, wherein the policy instructs that
session cookies cannot be shared between the first virtual machine and the different virtual machine.
<br/><br/> 10.  An apparatus for selectively sharing cookies between virtual machines, comprising: one or more processors;  and one or more computer-readable storage mediums storing one or more sequences of instructions, which when executed by the one or
more processors, cause: receiving a request to display a web page, wherein the web page includes top-level content served by a top-level domain and secondary content served by one or more other domains;  consulting a policy to identify a set of cookies
to inject into a virtual machine responsible for retrieving the web page, wherein the policy considers the top-level content and the secondary content in identifying the set of cookies to inject into the virtual machine;  and after injecting the
identified set of cookies into the virtual machine, retrieving the web page from within the virtual machine using the identified set of cookies.
<br/><br/> 11.  The apparatus of claim 10, wherein the policy indicates that any permanent cookie associated with either the top-level domain or any of the one or more other domains associated with secondary content to be retrieved by the virtual machine
are to be injected into the virtual machine.
<br/><br/> 12.  The apparatus of claim 10, wherein the policy indicates that any session cookies associated with the top-level domain are to be injected into the virtual machine, and wherein the policy indicates that any session cookies associated with any
of the one or more other domains are not to be injected into the virtual machine.
<br/><br/> 13.  The apparatus of claim 10, wherein the policy indicates that any permanent cookies associated with the secondary content are to be injected into the virtual machine unless the secondary content contains an indication that the secondary
content should not be embedded within another web page.
<br/><br/> 14.  The apparatus of claim 10, wherein the policy indicates that if a first domain redirects requests to itself to a second domain, then cookies associated with the first domain are provided to the virtual machine when the virtual machine is
retrieving content from the second domain.
<br/><br/> 15.  The apparatus of claim 10, wherein the policy indicates that if a first domain post data to a second domain, then cookies associated with the first domain are provided to the virtual machine when the virtual machine is retrieving content
from the second domain.
<br/><br/> 16.  The apparatus of claim 10, wherein the policy may be configured by a user to ensure cookies associated with a particular domain are injected into virtual machines responsible for retrieving content from that particular domain in a manner
specified by the user.
<br/><br/> 17.  The apparatus of claim 10, wherein execution of the one or more sequences of instructions further causes: receiving, from a remote location over a network, updated policy data to replace or augment the policy.
<br/><br/> 18.  The apparatus of claim 10, wherein the web page is a first web page, wherein the virtual machine is a first virtual machine, and wherein execution of the one or more sequences of instructions further causes: upon receiving a request to
display a second web page in a different tab than the first web page, retrieving the second web page from within a different virtual machine than the first virtual machine, wherein the policy instructs that session cookies cannot be shared between the
first virtual machine and the different virtual machine.
<br/><br/> 19.  One or more non-transitory computer-readable storage mediums storing one or more sequences of instructions for selectively sharing cookies between virtual machines, which when executed by one or more processors, cause: receiving a request
to display a web page, wherein the web page includes top-level content served by a top-level domain and secondary content served by one or more other domains;  determining that at least a portion of the web page should be retrieved from within a virtual
machine;  consulting a policy to identify a set of cookies to inject into the virtual machine, wherein the policy considers whether the virtual machine is responsible for retrieving one or more of top-level content and secondary content in identifying
the set of cookies to inject into the virtual machine;  and after injecting the identified set of cookies into the virtual machine, retrieving the portion of the web page from within the virtual machine. <hr/> <center><b><i>Description</i></b></center>
<hr/> <br/><br/>FIELD OF THE INVENTION
<br/><br/> Embodiments of the invention relate to selectively sharing cookies between virtual machines.
<br/><br/>BACKGROUND
<br/><br/> Web pages have, over the years, grown more complex.  Currently, it is not uncommon for a web page to embed content from a variety of different sources, such as one or more advertisements served from an ad server, portions of content served from
other sources, and/or links to social media services.
<br/><br/> A common way in which such content is embedded into a web page is through the use of an iFrame.  An iFrame is an HTML element that defines an inline frame in a document that may be used to embed another document, such as a web page, image,
advertisement, and the like, into that document.  To illustrate how an iFrame may be used, consider FIG. 1, which is a block diagram of a web page according to the prior art.  Web page 10 includes three separate embedded documents.  These three embedded
documents reside within the bounded areas defined by iFrames 20, 22, and 24.
<br/><br/> As an iFrame may be used to embed content from any source into a web page, iFrames 20, 22, and 24 may be used to display content from different sources.  For example, iFrame 20 may be used to display an advertisement served from an ad server,
iFrame 22 may embed a web page served from the same domain as web page 10, and iFrame 24 may embed a web page served from a different domain than which served web page 10.
<br/><br/> Any data, such as content embedded into a web page, that originates from an untrusted source has the potential to carry malicious code.  Thus, any content embedded within web page 10 that originates from outside the trusted domain that hosts web
page 10 may contain code that can be used for nefarious purposes.
<br/><br/> Because of this concern, an administrator of a web site may not allow web site 10 to embed any content from an external source.  While this may be a good rule of thumb, it is naive to think all web sites would adhere to this practice. 
Additionally, there may be instances when the administrator of a web site wishes a web site to link to or embed content originating from an untrusted source, as the perceived benefits of doing so might outweigh the perceived risks.  For example, many
web-based news sources encourage their readers to share their articles using other social media web sites and services.  As a result, it is currently common practice in the art to expose a user to a certain level of risk to achieve operability and
cohesiveness between web sites and services. <br/><br/>BRIEF DESCRIPTION OF THE DRAWINGS
<br/><br/> Embodiments of the invention are illustrated by way of example, and not by way of limitation, in the figures of the accompanying drawings and in which like reference numerals refer to similar elements and in which:
<br/><br/> FIG. 1 is a block diagram of a web page according to the prior art;
<br/><br/> FIG. 2 is a block diagram of system 100 according to one embodiment of the invention;
<br/><br/> FIG. 3 is a flowchart illustrating the steps of retrieving a web page using a virtualized web browser according to an embodiment of the invention;
<br/><br/> FIG. 4 is a block diagram that illustrates a computer system upon which an embodiment of the invention may be implemented;
<br/><br/> FIG. 5 is an illustration of injecting state data into a virtual machine according to an embodiment of the invention;
<br/><br/> FIG. 6A is a flowchart illustrating the steps of retrieving web content by selectively injecting cookies into one or more of virtual machines 120A, 120B, .  . . 120N according to an embodiment of the invention;
<br/><br/> FIG. 6B is an illustration of an exemplary policy for selectively injecting cookies into a virtual machine according to an embodiment of the invention; and
<br/><br/> FIG. 7 is a block diagram that illustrates a computer system upon which an embodiment of the invention may be implemented.
<br/><br/>DETAILED DESCRIPTION OF THE INVENTION
<br/><br/> Approaches for selectively sharing cookies between virtual machines responsible for retrieving web content are presented herein.  In the following description, for the purposes of explanation, numerous specific details are set forth in order to
provide a thorough understanding of the embodiments of the invention described herein.  It will be apparent, however, that the embodiments of the invention described herein may be practiced without these specific details.  In other instances, well-known
structures and devices are shown in block diagram form or discussed at a high level in order to avoid unnecessarily obscuring teachings of embodiments of the invention.
<br/><br/>Virtualized Web Browser
<br/><br/> Embodiments of the invention are directed towards selectively sharing cookies between virtual machines responsible for retrieving web content.  One or more policies may be consulted to determine which cookies should be injected into a virtual
machine that retrieves web content, such as a web page.  In this way, sensitive data contained within certain cookies, particularly session cookies, may not be introduced into certain virtual machines which might contain malicious code.  The malicious
code contained with a web page retrieved by the virtual machine would be not have access to the sensitive data contained within the cookies which policy dictates should not be injected into the virtual machine.
<br/><br/> Embodiments of the invention may be employed with a virtualized web browser.  A virtualized web browser refers to a plurality of components that cooperate to provide a secure web browsing experience.  A characteristic of a virtualized web
browser is that a portion of the components implementing the virtualized web browser resides in the host while another portion of the components implementing the virtualized web browser resides in one or more virtual machines.  While the portion of the
virtualized web browser that resides in the host is responsible for displaying content, that portion need not retrieve the displayed content from across the network.  Instead, the content displayed by a virtualized web browser is typically retrieved by
components in one or more virtual machines, although the component(s) of the virtualized web browser residing in the host may retrieve and render content if desired.
<br/><br/> A virtualized web browser presents the same user experience as a traditional (or "native") web browser.  A person using a virtualized web browser may, in fact, not even realize that they aren't using a traditional web browser.  Therefore, a user
of a virtualized web browser need not alter their usage patterns and may use a virtualized web browser in the same way as a traditional web browser.
<br/><br/> As used herein, the term "web browser" will be used to refer to both traditional web browsers and virtualized web browsers.  When specific reference is made to traditional web browsers (i.e., those web browsers which are not virtualized web
browsers), the term "traditional web browsers" or "native web browsers" will be used herein.
<br/><br/> The types of operations that are typically performed on a web browser include, without limitation, browsing to various web sites, entering information and logging into web pages, navigating back and forth between visited web pages, uploading and
downloading content through a web page, and saving and using bookmarks.  To support such activity, web browsers maintain temporary and persistent state information to ensure such operations are properly performed.
<br/><br/> The desire to ensure that a virtualized web browser offers the same user experience as a traditional web browser requires that virtualized web browsers manage the temporary and persistent state information necessary to perform expected web
browser operations across the underlying micro-virtualization environment in which these operations are performed.  Many approaches will be presented herein for selectively synchronizing the cookies of a virtualized web browser, based on policy, so that
the virtualized web browser provides a familiar user experience while operating in a secure manner.  Prior to doing so however, a more detailed description of how a virtualized web browser of an embodiment operates will be presented.
<br/><br/>Anatomy of a Virtualized Web Browser
<br/><br/> To better appreciate how a virtualized web browser operates, consider FIG. 2, which is a block diagram of system 100 according to one embodiment of the invention.  System 100 includes a virtualized web browser that has components that are
implemented on the host as well as on different virtual machines.  FIG. 1 depicts host 110 and virtual machines 120A, 120B, .  . . 120N.  Host 110 corresponds to the host operating system installed upon a device.  Host 110 may be embodied by a wide
variety of operating systems, either presently available or subsequently developed.
<br/><br/> In an embodiment (not depicted in FIG. 2), the functional components residing in host 110 may instead reside in a persistently maintained virtual machine.  Such an approach is discussed in U.S.  patent application Ser.  No. 13/526,755, entitled
"Ensuring the Privacy and Integrity of a Hypervisor," filed Jun.  19, 2012, the contents of which are incorporated by reference for all purposes herein.
<br/><br/> Virtual machines 120A, 120B, .  . . 120N each represent any type of virtual machine.  In an embodiment, virtual machines 120A, 120B, .  . . 120N may each correspond to a UCVM discussed in the '354 patent.  While FIG. 1 only specifically
identifies three virtual machines, namely virtual machines 120A, 120B, and 120N, the graphical notations of FIG. 1 are meant to convey that embodiments of the invention may employ any number of virtual machines.  Moreover, during the normal course of
operation, virtual machines may be periodically instantiated or destroyed, and so the particular number of virtual machines within system 100 will always be changing during normal operation.
<br/><br/> Virtual machines 120A, 120B, .  . . 120N may reside on the same physical machine as host 110, but they need not.  In fact, one or more of virtual machines 120A, 120B, .  . . 120N may reside on a different physical machine than on which host 110
resides and may communicate with host 110 over a network.  For example, host 110 may be implemented on a cell phone, laptop computer, tablet computer, PC, or other device or computer, and virtual machines 120A, 120B, .  . . 120N may be implemented on one
or more separate physical machines located over a network.  To facilitate the retrieval of web content, virtual machines 120A, 120B, .  . . 120N may have a network connection.  Note that the particular network settings and network configuration of
virtual machines 120A, 120B, .  . . 120N may be different and specifically tailored to suit the activity assigned thereto.
<br/><br/> In a virtualized web browser of an embodiment, different virtual machines may be used to perform user initiated actions such as retrieving requested content from the Internet.  Each of virtual machines 120A, 120B, .  . . 120N is completely
isolated from each other and from host 110.  As shall be explained below in greater detail, the determination of which virtual machine a particular action should be performed in may be based on policy, as reasons will be discussed for wanting to perform
certain actions together in the same virtual machine as well as reasons for wanting to perform various actions in separate virtual machines.
<br/><br/> As shown in FIG. 2, host 110 comprises web browser 112 while virtual machines 120A, 120B, .  . . 120N each comprise web browsers 122A, 122B, .  . . 122N respectively.  For clarity, web browsers 122A, 122B, .  . . 122N shall be termed VM web
browsers to signify that the web browsers execute within a virtual machine in system 100.  By the same token, web browser 112 shall be termed host web browser 112 to signify that it executes within host 112.
<br/><br/> A virtualized web browser of an embodiment is comprised of host web browser 112, one or more VM web browsers, such as VM web browsers 122A, 122B, and 122N, host module 114, and one or more guest modules, such as guest modules 124A, 124B, and
124N.  Host module 114 and guest modules 124A, 124B, and 124N are components which assist in synchronizing resources of the virtualized web browser.
<br/><br/> VM web browsers 122A, 122B, and 122N and other applications that are run on behalf of the virtualized web browser in each virtual machine store and update the state of a user's web browser session.  However, since each VM web browser is running
in an isolated virtual machine, the state changes made to the web browser session made by a particular virtual machine are local to that virtual machine.  This provides complete isolation between various user actions, which assists in promoting security;
however, isolating virtual machines from one another frustrates certain interfaces and behavior of a web browser that the user expects.
<br/><br/> Therefore, host module 114 and guest modules 124A, 124B, and 124N cooperate to share information about certain changes made to the web browser session and synchronize resources when appropriate.  The guest module within each virtual machine
tracks the resources that are requested and updated by the VM web browser within that virtual machine.  For example, guest module 124A within virtual machine 120A tracks the resources that are requested and updated by web browser 122A.  Host module 114
coordinates resource synchronization between host 110 and virtual machines 120A, 120B, .  . . 120N.  Host module 114 and the guest modules within each virtual machine communicate over secure communication channels that are not accessible to possible
insecure code running in virtual machines 120A, 120B, .  . . 120N or in host 110.
<br/><br/> Host module 114 and guest modules 124A, 124B, and 124N provide an interface to host web browser 112 so that information about the activity in virtual machines 120A, 120B, .  . . 120N is shared as needed and reflected in the user experience
provided by the virtualized web browser.  As a result of the activity of host module 114 and guest modules 124A, 124B, .  . . 124N, the user is not responsible for coordinating the activity of the underlying micro-virtualization of the virtualized web
browser.
<br/><br/> To illustrate the role played by host module 114 and guest modules 124A, 124B, .  . . 124N, consider that the VM web browser in each virtual machine maintains its own list of history entries reflecting where that particular VM web browser
navigated.  However, the user expects that any navigations previously performed by him to show up in the history entries of the virtualized web browser regardless of which particular VM web browser was involved in the navigation.  Therefore, operations
involving a user's past navigation history should reflect the browsing history of the user regardless of which particular virtual machine was responsible for retrieving the web pages.  Host module 114 and guest modules 124A, 124B, .  . . 124N help ensure
that relevant information about the user's browsing activity is shared appropriately between host 110 and virtual machines 120A, 120B, .  . . 120N so that browsing history behaves as expected.
<br/><br/> Another illustration of how host module 114 and guest modules 124A, 124B, .  . . 124N synchronize resources of a virtualized web browser may be shown by their coordinated support for the use of APIs from popular web sites such as <b><i>Facebook</i></b> and
Google on third-party web sites.  When one visits a third party web site that is integrated with <b><i>Facebook,</i></b> the web browser ideally uses secure mechanisms to show content related to your <b><i>Facebook</i></b> account on the third party web site.  For example, a news
web site can show stories that your friends from <b><i>Facebook</i></b> "liked" on that news web site.  These types of web page features typically use cookies or web protocols such as OAuth.  Cookies are resources that are exchanged between the web browser and web
sites being visited by the user.  If VM web browser 122A executing in virtual machine 120A and the web site being browsed by VM web browser 122A exchange cookies, then the cookies will likely be needed in host 110 (and potentially in other virtual
machines as explained below) to ensure that the display of the web page properly integrates with <b><i>Facebook</i></b>.  Therefore, as shall be explained in more detail below, host module 114 and guest modules 124A, 124B, .  . . 124N make sure that each virtual
machine has the cookies necessary so that the VM web browser executing therein can properly display and render any web page retrieved by that VM web browser.
<br/><br/>Operation of a Virtualized Web Browser
<br/><br/> Embodiments of the invention seamlessly synchronize resources of a virtualized web browser to present a completely native browser experience to the end user.  A wide variety of resources may be coordinated between host 110 and virtual machines
120A, 120B, .  . . 120N including without limitation: URLs, screen data for all or at least a portion of a web page retrieved by VM web browser, user input (such as keyboard and mouse actions) directed against a web page displayed by a web browser,
cookies, navigation history, bookmarks, configuration settings for the web browser, cache files of various types, DOM storage, and files saved and uploaded.  Any type of data that indicates a change in state in the user's web browsing experience ("state
data") may be synchronized as appropriate between host 110 and virtual machines 120A, 120B, .  . . 120N according to embodiments.
<br/><br/> Prior to discussing in detail how these types of resources are synchronized, it will be helpful to understand how a virtualized web browser retrieves and displays a requested web page.  FIG. 3 is a flowchart illustrating the steps of retrieving
a web page using a virtualized web browser according to an embodiment of the invention.
<br/><br/> In step 310, a user instructs a virtualized web browser to display a web page.  As previously explained, the user may not know that the web browser he or she is using is a virtualized web browser, as the virtualized web browser will exhibit the
appearance and behavior of a traditional web browser.  However, in all actuality, when a user interacts with a virtualized web browser, the user is actually directly interacting with host web browser 112 executing in host 110.
<br/><br/> The user actions taken with respect to host web browser 112 are identified by host module 114 in cooperation with host web browser 112.  Embodiments may inform host module 114 of the user actions taken with respect to host web browser 112 using
a variety of different techniques.  Different types of web browsers and/or host operating system may provide different options for informing host module 114 of user actions directed against host web browser 112, and embodiments of the invention may
employ any appropriate manner to do so.  Non-limiting, illustrative mechanisms for enabling communication between host web browser 112 and host module 114 include APIs, callbacks, and web browser plug-ins.  To recite one specific example, in an
embodiment where host web browser 112 is a version of Microsoft Internet Explorer, then Browser Helper Objects (BHO) may be used to inform module 114 of user actions directed against host web browser 112.  As another example, host web browser 112 may be
augmented with a plug-in that causes host module 114 to be informed of any user input submitted to host web browser 112.
<br/><br/> Once host module 114 identifies a user action directed against host web browser 112, host module 114 either performs the request action itself or forwards notice of the requested action to an appropriate virtual machine within system 100 for
processing.  Host module 114 may consult policy data to determine whether the user action should be processed within host 110 or within a particular virtual machine.
<br/><br/> To provide a concrete example, assume the user action is a request to display a web page.  Further assume that host module 114, in consultation with policy data, determines that virtual machine 120A is the appropriate virtual machine responsible
for retrieving that web page.
<br/><br/> In an embodiment, the particular virtual machine selected by host module 114 to process any user input or perform any requested user action will possess characteristics appropriate for the type of activity involved in doing so.  In this example,
virtual machine 120A should be configured to possess appropriate characteristics for retrieving the type of web page being requested.  If the requested web page is a web page on an internal corporate intranet site, then virtual machine 120A should have
appropriately tailored configuration settings to do so in a manner that addresses any security concerns.  Similarly, if the requested web page is a web page associated with the user's personal bank or other such financial institution, then virtual
machine 120A may have a different set of configuration settings to address the particular type of activity and level of risk involved
<br/><br/> Virtual machine 120A need not be instantiated at the time host module 114 determines that virtual machine 120A should retrieve the web page, as virtual machine 120A may be instantiated on-the-fly.  Host module 110 may instruct a hypervisor to
create a particular virtual machine using a template that causes the particular virtual machine to have characteristics chosen for particular task at hand, namely retrieving a particular web page in this example.  Any instantiated virtual machine will
comprise a guest module and may comprise a VM web browser.  Additional description of how virtual machines may be implemented on-the-fly with specifically tailored characteristics is described in the previously mentioned '354 patent.
<br/><br/> To inform virtual machine 120A to retrieve the requested web page, host module 114 communicates an instruction to guest module 124A within virtual machine 120A to retrieve the requested web page.  If VM web browser 122A is not instantiated at
the time guest module 124A receives the instruction to retrieve the requested web page, then guest module 124A instantiates VM web browser 122A at that time.
<br/><br/> In step 320, guest module 124A instructs VM web browser 122A to retrieve the requested web page.  In response, VM web browser 122A retrieves the requested web page and renders the web page.  Note that as VM web browser 122A is executing within
virtual machine 120A, the rendering of the requested web page by VM web browser 122A will not cause the rendered web page to be visually displayed to the user by VM web browser 122A, but instead, the retrieved web page is merely interpreted without being
shown upon a connected display device.
<br/><br/> Instead, host web browser 112 is responsible for displaying the retrieved web page on a connected physical display device.  To make this so, the visual appearance of the web page rendered by VM web browser 122A is shown as the web page displayed
by host web browser 112.  In other words, the content that was to be shown by VM web browser 122A is instead shown by host web browser 112.
<br/><br/> There are many ways in which the screen of a VM web browser may be displayed to the user by host web browser 112.  One way involves guest module 124A generating or obtaining a graphical representation (termed "screen data") of the rendered web
page.  Screen data is a graphical depiction of at least a portion of the appearance of the web page.  Screen data may represent the visual presentation of the entire web page or, as is performed by some embodiments, only a portion of the web page.  For
example, an uninterpreted web page may be represented as an HTML file, whereas screen data for that web page may be an image file, such as a file in a JPEG, TIF, PNG, or GIF format.  Screen data may be embodied using any type of format for defining how
to display content, such as a graphical representation.
<br/><br/> In an embodiment, after guest module 124A obtains screen data for the requested web page, guest module 124A sends the screen data for the requested web page to host module 114.
<br/><br/> In another embodiment, once screen data is generated for the requested web page, host module 114 retrieves the screen data for the requested web page from virtual machine 120A.  For example, host module 114 may retrieve the contents from a
predetermined location in memory at which the screen data is to be stored.
<br/><br/> In an embodiment, other data besides screen data may be obtained by host module 114 in step 320.  If guest module 124A retrieves a file or graphic in virtual machine 120A, then the graphic or file may be made available to host module 114.  After
host module 114 possesses screen data for the requested web page, processing proceeds to step 330.
<br/><br/> In step 330, the virtualized web browser processes the data received in step 320 and displays the requested web page.  In an embodiment, step 330 is performed by host module 114 instructing host web browser 112 to display the requested web page
using the screen data received from guest module 124A.  After doing so, the user may physically view the requested page upon a display device, as the visual representation of the web page may be displayed on a physical display device by host web browser
114.
<br/><br/> Note that host web browser 112 may display the requested web page using the screen data with or without any visual indicators that identify that the requested web page, or any portion thereof, was not retrieved within host 110 or by host web
browser 112.  If the use of visual indicators is desired, a specifically-colored border or a window decoration of a special color may be used to denote the host windows or tabs that are being rendered in an untrusted virtual machine.
<br/><br/>Using Multiple Virtual Machines to Retrieve a Single Requested Web Page
<br/><br/> The description of FIG. 3 was presented in terms of a retrieving a requested web page using a single web browser executing on a single virtual machine.  However, this need not be the case in all embodiments, as other embodiments may employ
multiple virtual machines to retrieve different portions of a single requested web page.  In such an embodiment, host web browser 112 would display the requested web page by displaying the assembled portions of screen data received from the two or more
virtual machines involved in retrieving the different portions of the web page.
<br/><br/> To further illustrate such an embodiment, consider FIG. 4, which is a block diagram illustrating which virtual machines in system 100 are responsible for retrieving and rendering portions of a single requested web page according to an embodiment
of the invention.  FIG. 4 depicts web page 410 that comprises two bounded areas of content 412 and 414.  Bounded areas of content 412 and 414 may be identified using a HTML construct called an "iFrame." The iFrame HTML tag is supported by all major web
browsers and is a way to demarcate different portions of a web page.  Within an iFrame, content may originate from a different source than the web page in which it resides.  In other words, web page 410, content within iFrame 412, and content within
iFrame 414 may each originate from a different source on the Internet.
<br/><br/> When host module 114 receives a request to display a web page, host module 114 may instruct multiple virtual machines to return screen data for certain portions of the requested web page.  For example, as depicted in FIG. 4, host module 114 may
instruct virtual machine 120A to retrieve screen data for the content web page 410 without any content for iFrame 412 or iFrame 414.  Also in this example, host module 114 may instruct virtual machine 120B to retrieve screen data for the content
associated with iFrame 412 and may instruct virtual machine 120N to retrieve screen data for the content associated with iFrame 414.  The determination of which virtual machine should retrieve screen data for which portion of a requested web page may be
made based on policy, as explained in more detail in a later section.
<br/><br/> When host module 114 receives screen data from two or more guest modules, host module 114 assembles the graphical images represented by the sets of screen data and instructs host web browser 112 to display the assembled web page.  In this way,
the web page depicted in FIG. 4 may be shown to the user without the user being informed that content within iFrame 412 and content within iFrame 414 were retrieved in a different virtual machine than web page 410.
<br/><br/> It may be advantageous to retrieve different portions of a web page from different virtual machines for security purposes.  Content contained within an iFrame may contain malicious code.  It is common for advertisements and the like to be
included within an iFrame.  Advertisements and the like may be served by a third party service.  As a result, it is difficult for the operator of a web site to monitor content embedded within a web page of their web site for malicious code.  By
retrieving the content associated with an iFrame in a separate virtual machine, any malicious code that attempts to access unauthorized resources will be unable to access other portions of the web page, let alone access to sensitive resources outside of
the virtual machine in which it executes.
<br/><br/>Communication Between the Host Module and the Guest Module During a Browsing Session
<br/><br/> The steps of FIG. 3 describe how the display of a single requested web page may be performed using a virtualized web browser.  During the course of a normal web browsing session, a user will, naturally, interact with a displayed web page, either
by clicking a link on the web page, entering and submitting text via a text box, and other more complex click and type interactions.  Since different virtual machines may be responsible for retrieving different web pages, or even different portions of
the same web page, any interaction of the user with a particular portion of a web page should be handled by the appropriate virtual machine.  To do so, host module 114 and one or more guest modules will communicate with each other to support a user's
interaction with a displayed web page.
<br/><br/> When a user selects a link on web page, clicks a button, submits character data entered via the keyboard, and the like, host module 114 is notified that a user is submitting user input relative to a particular location on a web page.  Host
module 114 identifies the portion of a displayed web page to which the user input is directed.  For example, host module 114 may identify a particular iFrame associated with the submitted character data or a particular link that was selected.  In certain
embodiments, the host module 114 also identifies where the position of a mouse cursor or any other input, such as input from a light pen, a finger on a display, and the like, relative to the web page.  In this way, host module 114 may identify where the
mouse pointer is relative to the web page to facilitate the performance of a mouse hover operation or any other such operation that requires the location of the mouse pointer or input mechanism relative to the web page.
<br/><br/> Host module 114 identifies, based on policy and results of prior operation of the system, the specific virtual machine responsible for the portion displayed web page to which the user input was directed.  Host module 114 then notifies the guest
module within the identified virtual machine of the user input.  For example, if host module 114 determines that virtual machine 120B is responsible for a web page, then host module forwards the user input to guest module 124B for processing.
<br/><br/> Once guest module 124B receives the user input, guest module 124B will instruct VM web browser 122B to act on the user input by performing the action associated with the user input.  For example, if the user input identifies a particular
location on a web page over which the user clicked a mouse button, then VM web browser 122B will navigate the mouse pointer to the same location, perform a mouse click operation, and process the results.  Note that VM web browser 122B will be displaying
the same web page as host web browser 114, and so the user input may be processed against the web page displayed by host web browser 114 similarly as if host web browser 114 was actually processing the user input.  Once VM web browser 122B has processed
the user input (such as, for example, obtaining a requested web page from a remote location in response to the user's mouse click), guest module 124B either sends screen data for the resulting appearance of the content displayed by VM web browser 122B to
host module 114, or host module 114 retrieves such screen data directly from virtual machine 120B, so that host module 114 may instruct host web browser 112 to display the screen data to the user.
<br/><br/> Guest module 124B may send a request to host module 124B for any information about the user's web browsing session that is pertinent to the processing of the user input.  If in this example guest module 124B requires one or more resources from
host module 114 to properly process the user input, then guest module 124B may contact host module 114 to obtain such information.  For example, if, in order to properly display a web page, guest module 124B determines that a particular cookie is needed,
then guest module 124B may obtain the cookie by issuing a request for the cookie to host module 114.
<br/><br/> If the user clicks a link on the displayed web page, guest module 124B may send a request to host module 124B to determine if guest module 124B can process a subsequent browsing action.  If host module 114 allows this action, guest module 124B
will instruct VM web browser 122B to retrieve the web page indicated by the selected link.  On the other hand, if host module 114 denies guest module 124B permission to continue processing the web processing requests, host module 114 will instruct
another virtual machine to retrieve the web content identified by the selected link.  The decision of the host module 114 on whether to allow guest module 124B permission to continue processing browsing requests will be made based on policy data.
<br/><br/>Persistently Storing Data and Injecting State Data
<br/><br/> Generally, absent special considerations, virtual machines 120A, 120B, .  . . 120N are not intended to be persisted ad infinitum.  While one or more of virtual machines 120A, 120B, .  . . 120N may be persistently stored in certain cases, more
commonly such virtual machines will be destroyed or de-allocated when they are no longer required.  Thus, the typical use case of virtual machines 120A, 120B, .  . . 120N is to instantiate them as needed and de-allocate them when their use is concluded. 
Consequently, data stored within one of virtual machines 120A, 120B, .  . . 120N may not be persisted.
<br/><br/> As a result, in an embodiment, when a guest module determines that data within the virtual machine should be persistently stored, the guest module sends a request to host module 114 to persistently store the data within host 114.  To
persistently store data describing state changes made to the web browsing session ("state data") at the virtual machine 120A, guest module 124A may send a request to persistently store the state data.  Upon receipt of the request, host module 114 stores
the data persistently on host 110.  Host module 114 may persistently store data at host 110 at state data storage 130.  State data storage 130 may be implemented by any mechanism capable of storing data, such as a database or a file system.
<br/><br/> In some embodiments, certain state data may be persisted by updating host web browser 112.  For example, if the state data which guest module 124A is requesting host module 114 to persistently store is a configuration setting change to the
virtualized web browser, a change to the user's bookmarks, or a cookie, then such changes may be stored by updating host web browser 112.  Host web browser 112 will thereafter persist such state changes.
<br/><br/> Alternately, rather than persistently storing state data at host 110, data may be persistently stored in a virtual machine that is persisted.  In such an embodiment, a guest module may communicate with an entity in a virtual machine to store
state data within the virtual machine.  This embodiment may be useful if it is desired to separate state data from host 110.  For example, if there is a possibility of a malicious program residing in the host, by persistently storing the state data in a
virtual machine, the malicious program will be unable to inspect the state data, thereby rendering the state data private and secure.  In such an embodiment, rather than state data storage 130 residing in host 110 as depicted in FIG. 1, state data
storage 130 will reside in a virtual machine, such as one of virtual machines 120A, 120B, .  . . 120N, which is configured to be persisted.
<br/><br/> The guest module running in each virtual machine has explicit and full visibility into the activity occurring within the virtual machine.  The guest module can decide, based on and within the limits of policies contained within policy data, when
the guest module should send resources or state data to host 110 to assist in servicing activity performed by the VM web browser.  When a VM web browser within a virtual machine decides to update or save new resources, the guest module within that
virtual machine may determine, based on the policies within the policy data, to send the information back to host module 114.  Host module 114 may decide to either update or add to the data stored in state data store 130 using the information sent by the
guest module.  Host module 114 may also determine to send updates to any currently running virtual machines that are performing various other navigations or other browser actions based on policy settings and/or knowledge of what is the activity happening
in each of the virtual machines.  This resource coordination may also make use of the knowledge of what all the virtual machines are doing with applications and resources other than the virtualized web browser.
<br/><br/> It will, on occasion, be necessary to inform a virtual machine about activities performed in a web browsing session that occurred outside of that virtual machine.  To do so, state data for a web browsing session is "injected" into that virtual
machine.  FIG. 5 is an illustration that will be referenced in a discussion of injecting state data into a virtual machine according to an embodiment of the invention.  Initially, with reference to FIG. 5, assume that VM web browser 122A is instructed to
perform an action by guest module 124A that causes VM web browser 122A to change the state of the web browsing session of the user.  Guest module 124A will be cognizant of any change in the web browsing state as guest module 124A monitors the activity
performed by VM web browser 122A.
<br/><br/> After guest module 124A determines that a state change in the web browsing session for the user has occurred in virtual machine 120A, guest module 124A consults policy data to determine whether such change should be persisted within system 100. 
The policy data that is consulted by guest module 124A in this regard may be implemented in a variety of ways.  The policy data may reside within guest module 124A or may reside elsewhere, such as a persisted virtual machine dedicated to storing policy
data.  Policy data refers to data that defines one or more policies that are used to shape the behavior of one or more components of the virtualized web browser.  Policy data will be described in greater detail below.
<br/><br/> Alternately, guest module 124A may be implemented such that guest module 124A causes any state data describing a local change in the state of the web browsing session to be automatically sent to host module 114 rather than doing so based on a
consultation with policy data.  In such an embodiment, host module 114 may be designed to consult policy data to determine how to process any state data received from a guest module in such an embodiment.
<br/><br/> In an embodiment, if guest module 124A determines that the change in state in the web browsing session should be persisted, then the guest module 124A causes state data that describes this change in state to be persistently stored.  FIG. 5
depicts this as action 510 embodied as a request to persistently store the state data sent from guest module 124A to host module 114.  While, as described above, embodiments may persistently store data using a variety of different mechanisms, the
embodiment of FIG. 5 stores state data persistently at host 110 within state data storage 130.  When host module 114 receives instruction 510 from guest module 124A, host module 114 stores the state data within state data storage 130 as shown in action
520.  This act of host module 114 storing the state data within state data storage 130 need not be automatic, but instead, may be based upon consultation with policy data.  For example, policies may be defined to determine whether state data should be
persisted at all, whether the state data should be persisted using state data storage 130 or host web browser 112, etc.
<br/><br/> The purpose of virtual machine 120A providing host 110 state data to persistently store is to ensure that the necessary information is available to notify components of the virtualized web browser of any relevant activity (or changes in state)
that occur in other components of the virtualized web browser.  Therefore, after persistently storing relevant state data concerning the activities of the web browsing session occurring in each virtual machine, embodiments send out (or "inject") relevant
information to virtual machines as necessary so the VM web browsers executing therein have all the necessary information to provide a seamless user experience.
<br/><br/> Injecting state data into a virtual machine is illustrated in FIG. 5 in action 530.  As shown by action 530, host module 114 is providing guest module 124B in virtual machine 120B state data.  The state data provided to virtual machine 120B
identifies information about how the user previously interacted with the virtualized web browser that will be used by VM web browser 122B in retrieving and/or rendering any content.
<br/><br/> Note that not all state data for a user need be injected into each virtual machine.  For security reasons, it is desirable to only expose the minimum amount of state data to a virtual machine necessary for the VM web browser executing therein to
retrieve and render a requested web page properly.  By "properly," what is meant is that the requested web page looks and behaves as the user expects based on his or her past history interacting with web site.  Said differently, a properly rendered web
page takes into account all pertinent state data necessary to resolve the display all content therein.  Policies defined by the policy data, therefore, will inject into a virtual machine only the state date which is deemed pertinent to the assigned
responsibilities for that virtual machine.
<br/><br/> To provide a concrete example, assume that virtual machine 120B is tasked with the responsibility of interacting with social media web sites.  Further assume that policies defined within the policy data consider such social media web sites as
posing a risk of infection of malicious code.  Therefore, it would not be advisable to expose any malicious code that is inadvertently introduced into virtual machine 120B to any cookies associated with the user's sensitive information, such as bank
account information, passwords, and the like.  Consequently, in an embodiment, when host module 114 injects state data into a virtual machine, host module consults policy data, either stored within host 110 or within a virtual machine that is
persistently stored, to identify state data that is pertinent to the assigned responsibilities of the virtual machine, so that only pertinent state data is injected therein.
<br/><br/> Injecting state data into a virtual machine may also be performed to warm up a cache within the virtual machine.  For example, if a user previously visited a particular web site, cache files for the web site may be persistently stored.  If the
user visits that web site again and a new virtual machine is instantiated to handle the navigation, the cache files associated with the particular web site may be injected into the newly instantiated virtual machine.
<br/><br/> When the state information associated with a virtual machine is to be persisted beyond the lifetime of the virtual machine (as per host module 114), it is convenient to persist this information with an identifier related to the activity being
executed in the virtual machine.  For example, the top-level domain name (TLD) of the URL being rendered inside the virtual machine may be a convenient identifier.  The identifier allows this information to be retrieved when it is needed, such as when
this information is injected into a virtual machine created to render a URL with the same TLD as of the virtual machine being destroyed.
<br/><br/>Policy Based Decision Making
<br/><br/> In embodiments of the invention, the operation of host module 114 and guest modules 124A, 124B, .  . . 124N is based, at least in part, upon policies defined in policy data.  For example, host module 114 may consult one or more policies defined
in policy data to (a) identify which virtual machine should be tasked with the responsibility of servicing a request to retrieve a web page, and/or (b) determine how to instruct a guest module, within the virtual machine designated responsible, to
retrieve the web page.  Policies may consider a host of factors in determining which virtual machine should service a request to retrieve a web page.  For example, the web address, knowledge of any scripts executing on the parent web page, and whether
the requested web page is in a new or existing web domain may all play a factor in determining which virtual machines retrieves the requested web page.
<br/><br/> When host module 114 receives a subsequent request to display another web page, host module 114 determines, based on policy data accessible to host module 114, whether the same virtual machine that handled the retrieving and rendering of a
previous requested web page should retrieve and render the newly requested web page.  For example, the policy data may indicate that a newly requested web page has characteristics similar to a previous web page retrieved and rendered by virtual machine
120A.  In such as case, host module 114 may task guest module 124A with retrieving and rendering the newly requested web page.  In this way, the policy data may treat web pages within the same web page similarly so that all the web pages of a particular
domain are serviced within the same virtual machine.
<br/><br/> Alternately, the policy data may indicate that the newly requested web page can be processed within the same virtual machine but using a new web browser.  In such a case, host module 114 may task guest module 124B with retrieving and rendering
the newly requested web page using a newly instantiated web browser in virtual machine 120A other than VM web browser 122A.
<br/><br/> Alternately, the policy data may indicate that the newly requested web page should be processed within a different virtual machine than any currently instantiated.  In such a case, host module 114 may instantiate a new virtual machine and
instruct a guest module, executing within the newly instantiated virtual machine, to retrieve and render the newly requested web page.
<br/><br/> In an embodiment, the policy data discussed above is shown as policy data 140 in FIG. 2.  In other embodiments not depicted in FIG. 2, policy data 140 may be persistently maintained in a persistently stored virtual machine.
<br/><br/>Deallocating Virtual Machines in a Controlled Manner
<br/><br/> In an embodiment, when a particular virtual machine is no longer required, that virtual machine may be de-allocated.  As a result, when host module 114 receives notification that the user is closing the virtualized web browser, host module 114
may, without human intervention, de-instantiate any virtual machine associated with the web browsing session.  Thus, any virtual machine that assisted in providing content to the virtualized web browser will be automatically de-instantiated in an
embodiment as a result of the user closing the virtualized web browser.
<br/><br/>Retrieving Content from Different Domains
<br/><br/> A virtualized web browser of an embodiment will have the same visually appearance and support the same features as a traditional web browser.  Therefore, like traditional web browsers, a virtualized web browser will support the use of tabs in an
embodiment.  However, a virtualized web browser may retrieve content to be displayed in a tab in a more secure manner than prior approaches.
<br/><br/> In an embodiment, upon the virtualized web browser being instructed to display a new tab, the virtualized web browser displays the new tab without instantiating a new virtual machine.  Thus, if a user were to repeated press "Control-T" or a
similar mechanism to launch a new tab, the new tab may be created and displayed by the virtualized web browser without instantiating or assigning any virtual machines to retrieve content for the new tab.  This advantageously minimizes memory usage of the
virtualized web browser.
<br/><br/> Once a user instructs the virtualized web browser to display a web page within a tab, host module 114 may consult policy data 140 to determine whether the requested web page may be retrieved and rendered in an existing virtual machine or if a
new virtual machine should be instantiated.
<br/><br/> In an embodiment, requested web pages from the same domain may be retrieved and rendered within the same virtual machine.  In this way, the synchronization of certain resources, such as cache files, is simplified and/or expedited.  Thus, if a
user requests a web page from a domain in which another web page has already been fetched and rendered within an existing virtual machine, then the newly requested web page may be fetched and rendered within that same virtual machine.  On the other hand,
if the user requests a web page from a domain from which no web pages have previously been fetched, for example, then a new virtual machine may be instantiated in which to fetch and render that web page.
<br/><br/>Synchronizing History Data
<br/><br/> Embodiments of the invention seamlessly synchronize resources of a virtualized web browser, and in particular history data, across host 110 and virtual machines 120A, 120B, .  . . 120N to present a completely native browser experience to the end
user.  History data is a type of state data.  History data is data that describes a user's navigation history.  History data may include the navigation history of the current session as well as web sites and resources previously visited during prior
browsing sessions.  By synchronizing history data across the virtualized web browser, the user is able to perform any type of operation involving history data in the same manner as in a traditional web browser even though web pages may be retrieved from
a plurality of virtual machines.
<br/><br/> In an embodiment, history data may include bookmarks for the user.  History may also include one or more URLs visited by the user as well as titles of web pages and names of resources used.  In order to perform certain operations on a web
browser, such as back page and forward page, it is necessary to know the sequence and identity of visited web pages in each tab; therefore, in an embodiment, history data may also identify one or more actions that were performed with respect to a
particular tab of the virtualized web browser.
<br/><br/> Operations involving these types of resources will be performed seamlessly since any history data pertinent to the function of the various virtual machines will be merged correctly by host module 114.  When new history data is created locally
within a particular virtual machine, host module 114 is informed of the new state data so that it may be persistently stored and injected into other virtual machines as necessary.  For example, if guest module 124A detects that new history data has been
created within virtual machine 120A, then guest module 124A may notify host module 114 of the new history data.  This may be accomplished in a variety of different ways by embodiments, e.g., guest module 124A may send host module 114 the new history data
via a secure communication channel or guest module 124A may cause the new history data to be persistently stored and may notify host module 114 that new history data has been stored and may be retrieved as needed.  In an embodiment, host module 114
causes any new history data sent from a virtual machine to be persistently stored so that host module 114 may inject the new history data, as needed, into appropriate virtual machines.
<br/><br/> In an embodiment, we optionally do not update history data to identify all actions taken in a virtual machine.  For example, if there is a redirect operation performed in a VM web browser, only the final or the first URL may be shared with the
host and other VMs, rather than all URLs involved in the redirect.
<br/><br/> In an embodiment, history data is used to update the visual appearance of host web browser.  For example, back or forward buttons may be displayed as disabled (or "grayed out") or active depending upon the available of appropriate history data
to service such operations.  When a user initiates the display of a menu in the host operating system that enables the user to navigate previously visited sites, history data will be used to perform the operation.  For example, if the user performs a
right click operation with his or her mouse to display a menu offering navigation options, or if the user clicks a back or forward button on the virtualized web browser, such navigation commands will be performed using history data obtained from the
virtual machines on the system.
<br/><br/>Synchronizing Cookies
<br/><br/> Embodiments of the invention seamlessly synchronize resources of a virtualized web browser, and in particular cookie data, across host 110 and virtual machines 120A, 120B, .  . . 120N to present a completely native browser experience to the end
user.  Cookie data is a type of state data.  Cookie data is data that describes a user's cookies.  Cookie data may include cookies dropped in the current session as well as cookies dropping in prior browsing sessions.  By synchronizing cookie data across
the virtualized web browser, the user is able to perform any type of operation involving cookie data in the same manner as in a traditional web browser even though web pages may be retrieved from a plurality of virtual machines.
<br/><br/> In an embodiment, when host module 114 instructs a guest module to coordinate with a VM web browser to retrieve and render a requested web page, host module 114 provides the guest module cookie data.  The cookie data identifies one or more
cookies deemed to be pertinent to the retrieval of the web page.  Rather than relying solely using a push model, certain embodiments may also employ a pull model where the guest module may send a request to host module 114 to ascertain whether there are
any additional cookies for the user associated with an embedded web page comprised within the web page.  In this way, host module 114 may provide to a guest module any cookie data which host module 114 deems pertinent to the retrieval of a requested web
page.  However, upon retrieving the requested web page, if the guest module determines that possession of one or more cookies would affect how the requested web page is rendered, then the guest module may communicate with host module 114 to determine if
such cookies have been established for the user, and if so, then the guest module may obtain them from host module 114.
<br/><br/> The type and amount of cookie data sent from host module 114 to a guest module may be configured using policies defined in the policy data.  For example, in an embodiment, host module 114, based on consultation with policy data, may only sent to
a guest module cookie data that identifies cookies associated with the top-level domain of the requested web page and does not identify any cookies associated with the domain of any embedded web pages comprised within the requested web page.  On the
other hand, in other embodiment, policy data may define a different set of policies, and host module 114 in that embodiment may provide, to a guest module, cookie data that identifies cookies associated with the top-level domain of the requested web page
and any domain of any embedded web pages comprised within the requested web page.  Embodiments may employ policy data that defines a variety of policies for specifying which cookies should be provided to a virtual machine.
<br/><br/> Embodiments of the invention may store cookie data using a variety of different mechanisms.  Cookie data may be stored in any location and in any manner that state data may be stored.  Cookie data may be stored at state data storage 130 in an
embodiment.  In another embodiment, cookie data may be persistently stored by host web browser 112.  In another embodiment, cookie data may be stored in a virtual machine that is persistently stored.
<br/><br/> A guest module may employ a variety of mechanisms to determine when a VM web browser drops a cookie.  For example, the guest module may detect the performance of set cookie operation via an API, a callback, or a plug-in to the VM web browser.
<br/><br/> In an embodiment, a guest module may redirect processing of any set cookie instruction or get cookie instruction comprised within the web page to host module 114.  In this way, host module 114 may become a central manager of all cookies
throughout the virtualized web browser, regardless of which particular virtual machine is retrieving a web page.
<br/><br/>Selectively Injecting Cookies into a Virtual Machine
<br/><br/> In an embodiment, host module 114 may selectively inject cookies into a virtual machine responsible for retrieving web content.  The decision of which cookies to inject into a particular virtual machine may be made through a consultation with a
configurable policy.  In this way, sensitive data contained within the cookies may only be exposed to trusted virtual environments, thereby minimizing the possibility that malicious code, contained within an untrusted web page, may access sensitive data
within a cookie for an unscrupulous purpose.  A description of these techniques will be presented below with reference to FIG. 6A, which is a flowchart illustrating the steps of retrieving web content by selectively injecting cookies into one or more of
virtual machines 120A, 120B, .  . . 120N according to an embodiment of the invention.
<br/><br/> In step 610, a request to display a web page is received by host module 114.  The request of step 610 may originate from host web browser 110.  A user may instruct host web browser 110 to retrieve and display a web page or other web resource. 
In turn, host web browser 110 may communicate the request to host module 114 for processing.
<br/><br/> A web page may include top-level content served by a top-level domain and secondary content served by one or more other domains (referred to herein as "non-top-level domains").  A top-level domain is the domain from which the requested web page
or other web resource is retrieved.  For example, if a request is received in step 610 for a web page served from a fictitious ABC web site, then the domain associated with ABC web site is the top-level domain since a request for that web page will be
sent to the ABC domain.
<br/><br/> An example of secondary content is content embedded within a web page (for example, within an iFrame or similar mechanism) which is served to the top-level domain by another domain when the web page is requested.  For example, in the example
above, the requested web page served by the ABC web site may include an advertisement.  This advertisement may actually be provided to the ABC web site at the time the web page is requested by an ad server that is not part of ABC web site.  The
advertisement would be an example of secondary content.  As another example, the web page served by the ABC domain may contain one or more components (such as graphics and code) which is obtained from a social media web site that is outside of the ABC
web domain.  A common example of this is the "like" button from Facebook.com which is featured on many web pages from news organizations.  The like button from Facebook.com is also an example of secondary content.  These are but a few examples, as
secondary content may include a wide variety of embedded content that is served or obtained from another domain other than the top-level domain.
<br/><br/> In step 620, host module 114 consults a policy to identify a set of cookies to inject into a virtual machine deemed responsible for retrieving the web page requested in step 610.  The consulted policy may be stored as policy data 140.  As used
herein, policy data 140 is data that identifies one or more policies for determining how cookies should be shared among or injected into virtual machines 120A, 120B, .  . . 120N.
<br/><br/> Assume that host module 114 determines that virtual machine 120A should be instantiated so that VM web browser 122A may process the request received in step 610.  In step 620, host module 114 would determine which cookies to inject into virtual
machine 120A, and thereafter, inject the cookies into virtual machine 120A.
<br/><br/> The policies for sharing cookies which are described by policy data 140 may be arbitrarily complex and may consider a variety of different factors.  To describe several concrete examples of policies for sharing cookies according to an
embodiment, reference will be made to FIG. 6B, which is an illustration of an exemplary policy for selectively injecting cookies into virtual machines according to an embodiment of the invention.
<br/><br/> FIG. 6B illustrates a policy for determining what types of cookies should be injected into a virtual machine that is responsible for retrieving a web page that comprises both top-level content and secondary content.  FIG. 6B distinguishes
between permanent cookies and session cookies.  A permanent cookie is a cookie that is persisted after a web browser has ceased execution.  Certain web sites may invite their user base to have the web site "remember" their username or other credential by
storing a permanent cookie for purposes of simplifying the login process on a return visit.  On the other hand, a session cookie is a cookie that is persisted only during the execution of the web browser.  Many commercial banks only store data in session
cookies for security purposes, as cookies that persist for longer periods of time are more vulnerable to inspection by malicious programs.
<br/><br/> To illustrate using the above example, the exemplary policy of FIG. 6B would instruct that any permanent cookies that are associated with either (a) the top-level domain of the requested web page or (b) any non-top-level domain associated with
secondary content comprised within the requested web page be injected into virtual machine 120A.  Similarly, the policy of FIG. 6B would instruct that any session cookies that are associated with the top-level domain of the requested web page be injected
into virtual machine 120.
<br/><br/> To inject a cookie into virtual machine 120A, host module 114 retrieves the cookie from state data storage 130 and provides the cookie to virtual machine 120A.
<br/><br/> However, the policy of FIG. 6B would instruct host module 114 that any session cookies that are associated with the domain of secondary content comprised within the requested web page are not to be injected into virtual machine 120A.  Note that
not providing the session cookies for secondary content to virtual machine 120A may prevent virtual machine 120A from render the requested web page in the same manner as if virtual machine 120A had those cookies.  While the user may notice this
difference, advantageously this prevents any malicious code executing within the top-level content of the requested web page from inspecting the user's session cookies.
<br/><br/> In an embodiment, policy data 140 may be configured by a user to ensure cookies associated with a particular domain are injected into virtual machines in a desirable manner as specified by the user.  Such configuration may be performed at a
variety of levels of granularity.  For example, if the user trusts web site A, then the user may configure policy data 140 to instruct host module 114 to inject all permanent cookies and session cookies into a virtual machine responsible for retrieving
content from web site A, regardless of whether that content is top-level content or secondary content.  As another example, a user may configure policy data 140 to instruct host module 114 to inject only permanent cookies, but not session cookies, for
any secondary content into a virtual machine responsible for retrieving a web page that includes content from a set of domains specified by the user.
<br/><br/> In an embodiment, policy data 140 may indicate that any permanent cookies associated with secondary content are to be injected into a virtual machine responsible for retrieving a web page unless the secondary content contains an indication that
the secondary content should not be embedded within another web page.  For example, certain web pages may include a &lt;noframes&gt; HTML tag to notify a web browser that the web page should only be top-level content and is not intended to be secondary
content.  Thus, a web page which contains a &lt;noframes&gt; tag but is nevertheless embedded inside another web page is suggestive of a malicious attempt to gain access to sensitive data within cookies.  Therefore, no cookies associated within secondary
content that comprises the &lt;noframes&gt; tag may be injected into virtual machine 120A in this example.
<br/><br/> In an embodiment, policy data 140 may indicate that if a first domain redirects requests to itself to a second domain, then cookies associated with the first domain are provided to a virtual machine responsible for retrieving content from the
second domain.  For example, the web address ABC.com may resolve (using either a 301 or 302 redirect) so that it redirects to AmericanBananaCorporation.com.  Since such a relationship evidences a trust relationship from ABC.com to
AmericanBananaCorporation.com, any cookies associated with ABC.com will be provided to a virtual machine responsible for retrieving content from AmericanBananaCorporation.com.  Note, however, that this is not a two-way trust relationship.  Therefore,
cookies associated with AmericanBananaCorporation.com would not be shared with a virtual machine responsible for retrieving content from ABC.com in this example, as the trust relationship is only one way.
<br/><br/> In an embodiment, policy data 140 may also indicate that if a first domain posts data to a second domain, then cookies associated with the first domain are provided to a virtual machine responsible for retrieving content from the second domain. 
For example, certain web sites may post or publish data to other services associated with other domains.  As before, this evidences a one-way trust relationship.  Therefore, cookies associated with the first domain (the domain which posts or publishes to
the second domain) would be shared with a virtual machine responsible for retrieving content from the second domain.
<br/><br/> In an embodiment, updates or additions to policy data 140 may be received from a remote location over a network.  This advantageously allows policy data 140 to be updated at a future data to adjust how cookies are injected into virtual machines.
<br/><br/> In step 630, the web page is retrieved from within the virtual machine using the identified set of cookies.
<br/><br/> Embodiments of the invention advantageously promote privacy between tabs of a web browser.  In this way, if a user does not log out of a web site rendered in one tab of a web browser, policy may dictate that certain cookies for that web site
(such as for example all cookies or just session cookies, for example) will not be injected into other virtual machines responsible for rendering content displayed in other tabs of the web browser.  This may be achieved by rendering web pages shown in
different tabs of a web browser in different virtual machines and configuring policy data 140 in the desired manner, e.g., policy data 140 may be configured such that session cookies cannot be shared between different virtual machine rendering web
content displayed in the tabs of the web browser.
<br/><br/>Managing Display Issues
<br/><br/> Embodiments of the invention enable a web page retrieved and rendered within a virtual machine by a VM web browser to be displayed upon a physical display device by host web browser 112 executing on host 110.  Host module 114 assists in
assembling the rendered content obtained from the host or from any virtual machine responsible in contributing rendered content for a web page displayed by host web browser 114.
<br/><br/> Certain types of web content may be deemed secure while other types of web content may be deemed insecure.  For example, web sites accessible over a secure connection (vis-a-vis a https connection) or web pages hosted internally on an Intranet
may be deemed secure (i.e., low risk of comprising malicious software).  Other public web sites available on the Internet may be deemed insecure due to the higher level risk that such sites may be infected with malicious code.
<br/><br/> Embodiments may treat secure web sites different than insecure web sites.  A virtualized web browser of an embodiment may interact with a secure web site using a VM web browser executing with a virtual machine having characteristics specifically
tailored to interact with the secure web site.  In the same vein, a virtualized web browser of an embodiment may interact with an insecure web site using a VM web browser executing with a virtual machine having characteristics specifically tailored to
interact with the insecure web site.
<br/><br/> A single web page may contain secure portions and insecure portions.  For example, a child web page may be embedded within a parent web page using a HTML construct such as an "iFrame." The parent web page may be deemed secure while the child web
page may be deemed insure.  In an embodiment, when a requested web page contains both secure and insecure content, a warning may be displayed to the user.  The warning may inform the user that the requested web page contains content deemed insecure.  The
warning may allow the user to consent to assume the risk and continue with processing the web page.  If the user wishes to proceed with retrieving the web page, then a new virtual machine may be instantiated for purposes of retrieving the insecure
portions of the requested web page.  The newly instantiated virtual machine will contains a guest module and a VM web browser.  The newly instantiated guest module and VM web browser will cooperate to retrieve and render the insecure portions of the
requested web page.  Once host module 114 obtains screen data for the insecure and secure portions of the requested web page, host module 114 may assemble the rendered portions of the requested web page and instruct host web browser 112 to display the
assembled web page.
<br/><br/> Host module 114 may obtain screen data for a rendered portion of a web page in a variety of different ways.  For example, in an embodiment, host module 114 may obtain screen data may accessing a frame buffer that stores data representing a
rendered portion of a web page.  Host module 114 may do so for each virtual machine responsible for rendering a portion of a requested web page.  After obtaining all the pieces of the requested web page, host module 114 may assemble the pieces and
instruct host web browser 112 to display the assembled web page.
<br/><br/> In another embodiment, host module 114 may obtain screen data using an operating system protocol for displaying the contents of one frame in another frame.  In this way, the rendered content displayed by a VM web browser may be identified and
displayed by host web browser 112.
<br/><br/> Note that it may be desirable in certain embodiments to configure a policy to disallow the display of certain types of content.  For example, content originating from certain prohibited web sites or possessing certain undesirable
characteristics, such as embedded graphics or text associated with one or more keywords, may be prevented from being displayed.  In such an embodiment, policy data may be stored which defines one or more polices that demarcate when certain content should
or should not be displayed by host web browser 112.  When host module 114 obtains screen data, host module 114 may consult the policy data to determine whether it is permissible to display the screen data.  If it is not permissible to display a set of
screen data, then host module 114 instructs host web browser 112 to display any portion of the web page which is allowed, but redacts any disallowed portions of the requested web page by causing such portions to be displayed blank or with a graphic that
explains that the portion is not being displayed for violation of a policy.
<br/><br/> In an embodiment, when the virtualized web browser comprises two or more tabs, each tab may be serviced by a separate VM web browser executing within a separate virtual machine.
<br/><br/>Extensions
<br/><br/> Note that embodiments of the invention have been chiefly described with reference to a virtualized web browser.  However, the principles presented herein are equally application to other types of applications.  Indeed, the teachings described
above are equally applicable to any type of virtualized application, such as a virtualized email client or virtualized email server.  In such an embodiment, rather than retrieving and rendering web pages within virtual machines, each virtual machine may
retrieve and render email or email attachments.  Host 110 may be implemented on a cell phone, tablet PC, and the like, and virtual machines 120A, 120B, .  . . 120N may reside in a data center or other remote location.  When a user instructs the cell
phone or tablet PC to display an email or an email attachment, the request could be routed to a particular virtual machine, which retrieves the email, renders the email or email attachment to produce screen data, and sends the screen data to the cell
phone or tablet PC for display.
<br/><br/>Hardware Mechanisms
<br/><br/> In an embodiment, host 110 and one or more of virtual machines 120A, 120B, .  . . 120N of FIG. 1 may be implemented on a computer system.  FIG. 7 is a block diagram that illustrates a computer system 700 upon which an embodiment of the invention
may be implemented.  In an embodiment, computer system 700 includes processor 704, main memory 706, ROM 708, storage device 710, and communication interface 718.  Computer system 700 includes at least one processor 704 for processing information. 
Computer system 700 also includes a main memory 706, such as a random access memory (RAM) or other dynamic storage device, for storing information and instructions to be executed by processor 704.  Main memory 706 also may be used for storing temporary
variables or other intermediate information during execution of instructions to be executed by processor 704.  Computer system 700 further includes a read only memory (ROM) 708 or other static storage device for storing static information and
instructions for processor 704.  A storage device 710, such as a magnetic disk or optical disk, is provided for storing information and instructions.
<br/><br/> Computer system 700 may be coupled to a display 712, such as a cathode ray tube (CRT), a LCD monitor, and a television set, for displaying information to a user.  An input device 714, including alphanumeric and other keys, is coupled to computer
system 700 for communicating information and command selections to processor 704.  Other non-limiting, illustrative examples of input device 714 include a mouse, a trackball, or cursor direction keys for communicating direction information and command
selections to processor 704 and for controlling cursor movement on display 712.  While only one input device 714 is depicted in FIG. 7, embodiments of the invention may include any number of input devices 714 coupled to computer system 700.
<br/><br/> Embodiments of the invention are related to the use of computer system 700 for implementing the techniques described herein.  According to one embodiment of the invention, those techniques are performed by computer system 700 in response to
processor 704 executing one or more sequences of one or more instructions contained in main memory 706.  Such instructions may be read into main memory 706 from another machine-readable medium, such as storage device 710.  Execution of the sequences of
instructions contained in main memory 706 causes processor 704 to perform the process steps described herein.  In alternative embodiments, hard-wired circuitry may be used in place of or in combination with software instructions to implement embodiments
of the invention.  Thus, embodiments of the invention are not limited to any specific combination of hardware circuitry and software.
<br/><br/> The term "machine-readable storage medium" as used herein refers to any tangible medium that participates in storing instructions which may be provided to processor 704 for execution.  Such a medium may take many forms, including but not limited
to, non-volatile media and volatile media.  Non-volatile media includes, for example, optical or magnetic disks, such as storage device 710.  Volatile media includes dynamic memory, such as main memory 706.
<br/><br/> Non-limiting, illustrative examples of machine-readable media include, for example, a floppy disk, a flexible disk, hard disk, magnetic tape, or any other magnetic medium, a CD-ROM, any other optical medium, a RAM, a PROM, and EPROM, a
FLASH-EPROM, any other memory chip or cartridge, or any other medium from which a computer can read.
<br/><br/> Various forms of machine readable media may be involved in carrying one or more sequences of one or more instructions to processor 704 for execution.  For example, the instructions may initially be carried on a magnetic disk of a remote
computer.  The remote computer can load the instructions into its dynamic memory and send the instructions over a network link 720 to computer system 700.
<br/><br/> Communication interface 718 provides a two-way data communication coupling to a network link 720 that is connected to a local network.  For example, communication interface 718 may be an integrated services digital network (ISDN) card or a modem
to provide a data communication connection to a corresponding type of telephone line.  As another example, communication interface 718 may be a local area network (LAN) card to provide a data communication connection to a compatible LAN.  Wireless links
may also be implemented.  In any such implementation, communication interface 718 sends and receives electrical, electromagnetic or optical signals that carry digital data streams representing various types of information.
<br/><br/> Network link 720 typically provides data communication through one or more networks to other data devices.  For example, network link 720 may provide a connection through a local network to a host computer or to data equipment operated by an
Internet Service Provider (ISP).
<br/><br/> Computer system 700 can send messages and receive data, including program code, through the network(s), network link 720 and communication interface 718.  For example, a server might transmit a requested code for an application program through
the Internet, a local ISP, a local network, subsequently to communication interface 718.  The received code may be executed by processor 704 as it is received, and/or stored in storage device 710, or other non-volatile storage for later execution.
<br/><br/> In the foregoing specification, embodiments of the invention have been described with reference to numerous specific details that may vary from implementation to implementation.  Thus, the sole and exclusive indicator of what is the invention,
and is intended by the applicants to be the invention, is the set of claims that issue from this application, in the specific form in which such claims issue, including any subsequent correction.  Any definitions expressly set forth herein for terms
contained in such claims shall govern the meaning of such terms as used in the claims.  Hence, no limitation, element, property, feature, advantage or attribute that is not expressly recited in a claim should limit the scope of such claim in any way. 
The specification and drawings are, accordingly, to be regarded in an illustrative rather than a restrictive sense.
<br/><br/><center><b>* * * * *</b></center>
<hr/>
   <center>
   <a href="http://pdfpiw.uspto.gov/.piw?Docid=09384026&amp;homeurl=http%3A%2F%2Fpatft.uspto.gov%2Fnetacgi%2Fnph-Parser%3FSect1%3DPTO2%2526Sect2%3DHITOFF%2526u%3D%25252Fnetahtml%25252FPTO%25252Fsearch-adv.htm%2526r%3D156%2526f%3DG%2526l%3D50%2526d%3DPTXT%2526s1%3Dfacebook%2526p%3D4%2526OS%3Dfacebook%2526RS%3Dfacebook&amp;PageNum=&amp;Rtype=&amp;SectionNum=&amp;idkey=NONE&amp;Input=View+first+page"><img alt="[Image]" border="0" src="/netaicon/PTO/image.gif" valign="middle"/></a>
   <table>
   <tbody><tr><td align="center"><a href="http://ebiz1.uspto.gov/vision-service/ShoppingCart_P/ShowShoppingCart?backUrl1=http%3A//patft.uspto.gov/netacgi/nph-Parser?Sect1%3DPTO2%26Sect2%3DHITOFF%26u%3D%25252Fnetahtml%25252FPTO%25252Fsearch-adv.htm%26r%3D156%26f%3DG%26l%3D50%26d%3DPTXT%26s1%3Dfacebook%26p%3D4%26OS%3Dfacebook&amp;backLabel1=Back%20to%20Document%3A%209384026"><img alt="[View Shopping Cart]" border="0" src="/netaicon/PTO/cart.gif" valign="middle"/></a>
   <a href="http://ebiz1.uspto.gov/vision-service/ShoppingCart_P/AddToShoppingCart?docNumber=9384026&amp;backUrl1=http%3A//patft.uspto.gov/netacgi/nph-Parser?Sect1%3DPTO2%26Sect2%3DHITOFF%26u%3D%25252Fnetahtml%25252FPTO%25252Fsearch-adv.htm%26r%3D156%26f%3DG%26l%3D50%26d%3DPTXT%26s1%3Dfacebook%26p%3D4%26OS%3Dfacebook&amp;backLabel1=Back%20to%20Document%3A%209384026">
   <img alt="[Add to Shopping Cart]" border="0" src="/netaicon/PTO/order.gif" valign="middle"/></a>
   </td></tr>
   <tr><td align="center">
     <a href="/netacgi/nph-Parser?Sect1=PTO2&amp;Sect2=HITOFF&amp;u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&amp;r=156&amp;f=S&amp;l=50&amp;d=PTXT&amp;s1=facebook&amp;p=3&amp;Query=facebook"><img alt="[PREV_LIST]" border="0" src="/netaicon/PTO/prevlist.gif" valign="MIDDLE"/></a>
<a href="/netacgi/nph-Parser?Sect1=PTO2&amp;Sect2=HITOFF&amp;u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&amp;r=156&amp;f=S&amp;l=50&amp;d=PTXT&amp;s1=facebook&amp;p=4&amp;Query=facebook"><img alt="[HIT_LIST]" border="0" src="/netaicon/PTO/hitlist.gif" valign="MIDDLE"/></a>
<a href="/netacgi/nph-Parser?Sect1=PTO2&amp;Sect2=HITOFF&amp;u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&amp;r=156&amp;f=S&amp;l=50&amp;d=PTXT&amp;s1=facebook&amp;p=5&amp;Query=facebook"><img alt="[NEXT_LIST]" border="0" src="/netaicon/PTO/nextlist.gif" valign="MIDDLE"/></a>
<a href="/netacgi/nph-Parser?Sect1=PTO2&amp;Sect2=HITOFF&amp;u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&amp;r=155&amp;f=G&amp;l=50&amp;d=PTXT&amp;s1=facebook&amp;p=4&amp;OS=facebook"><img alt="[PREV_DOC]" border="0" src="/netaicon/PTO/prevdoc.gif" valign="MIDDLE"/></a>
<a href="/netacgi/nph-Parser?Sect1=PTO2&amp;Sect2=HITOFF&amp;u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&amp;r=157&amp;f=G&amp;l=50&amp;d=PTXT&amp;s1=facebook&amp;p=4&amp;OS=facebook"><img alt="[NEXT_DOC]" border="0" src="/netaicon/PTO/nextdoc.gif" valign="MIDDLE"/></a>

   <a href="#top"><img alt="[Top]" border="0" src="/netaicon/PTO/top.gif" valign="middle"/></a>
   </td></tr>
   </tbody></table>
   <a name="bottom"></a>
   <a href="/netahtml/PTO/index.html"><img alt="[Home]" border="0" src="/netaicon/PTO/home.gif" valign="middle"/></a>
   <a href="/netahtml/PTO/search-bool.html"><img alt="[Boolean Search]" border="0" src="/netaicon/PTO/boolean.gif" valign="middle"/></a>
   <a href="/netahtml/PTO/search-adv.htm"><img alt="[Manual Search]" border="0" src="/netaicon/PTO/manual.gif" valign="middle"/></a>
   <a href="/netahtml/PTO/srchnum.htm"><img alt="[Number Search]" border="0" src="/netaicon/PTO/number.gif" valign="middle"/></a>
   <a href="/netahtml/PTO/help/help.htm"><img alt="[Help]" border="0" src="/netaicon/PTO/help.gif" valign="middle"/></a>
   </center>

</coma></coma></body></html>